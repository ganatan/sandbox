install_frontend_angular:
  stage: install
  image: node:20
  before_script:
    - cd frontend-angular
    - npm ci
  script:
    - node -v
  # rules:
  #   - changes: [frontend-angular/**]

lint_frontend_angular:
  stage: lint
  image: node:20
  before_script:
    - cd frontend-angular
    - npm ci
  script:
    - npm run lint
  # rules:
  #   - changes: [frontend-angular/**]

# test_frontend_angular:
#   stage: test
#   image: node:20
#   before_script:
#     - cd frontend-angular
#     - apt-get update
#     - apt-get install -y chromium
#     - export CHROME_BIN=/usr/bin/chromium
#     - npm ci
#   script:
#     - npm run test:headless
#   rules:
#     - changes: [frontend-angular/**]

build_frontend_angular:
  stage: build
  image: node:20
  before_script:
    - cd frontend-angular
    - npm ci
  script:
    - npm run build -- --configuration=production
  artifacts:
    paths:
      - frontend-angular/dist
    expire_in: 7 days
  # rules:
  #   - changes: [frontend-angular/**]
